generator client {
  provider = "prisma-client"
  output   = "../lib/prisma"
}

datasource db {
  provider = "postgresql"
}

model Installation {
  id Int @id

  repositories RepositoriesOnInstallations[]
}

model Repository {
  owner            String
  name             String
  issueCount       Int       @default(0)
  pullRequestCount Int       @default(0)
  pushedAt         DateTime?

  installations RepositoriesOnInstallations[]

  @@id([owner, name], name: "fullName")
}

model RepositoriesOnInstallations {
  installation   Installation @relation(fields: [installationId], references: [id], onDelete: Cascade)
  installationId Int

  repository      Repository @relation(fields: [repositoryOwner, repositoryName], references: [owner, name], onDelete: Cascade)
  repositoryOwner String
  repositoryName  String

  @@id([installationId, repositoryOwner, repositoryName])
}
